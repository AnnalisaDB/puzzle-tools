<!DOCTYPE html>
<!-- Copyright (C) 2015 Doug Orleans. Source: https://github.com/dougo/puzzle-tools -->
<html>
  <head>
    <title>Caesar Shift</title>
    <style>
      body { text-align: center; }
      input, table { font-family: monospace; font-size: 20px; }
      table { margin: 0 auto; }
      td { padding: 0 1em; }
    </style>
    <script src=http://code.jquery.com/jquery-2.1.3.min.js></script>
    <script>
      var A = 'A'.charCodeAt(0);

      function shiftLetter(letter, n) {
        var code = letter.charCodeAt(0);
        // TODO: lowercase letters, preserve case
        // TODO: don't shift non-letters
        return String.fromCharCode((code - A + n) % 26 + A);
      }

      function shift(plaintext, n) {
        return plaintext.split('').map(function (letter) { return shiftLetter(letter, n); }).join('');
      }

      function renderRow($table, i, shifted, reversed, doubled) {
        var $row = $('<tr>').appendTo($table);
        if (doubled) shifted += shifted;
        if (reversed) {
          var reversed = shifted.split('').reverse().join('');
          $('<td>').html(reversed).appendTo($row);
        }
        $('<td>').html(i).appendTo($row);
        $('<td>').html(shifted).appendTo($row);
      }

      function render($plaintext, $table) {
        $table.empty();
        var plaintext = $plaintext.focus().val();
        if (plaintext.length === 0) return;
        var reversed = $('#reverse').prop('checked');
        var doubled  = $('#double').prop('checked');
        for (var i = 1; i <= 26; i++) {
          renderRow($table, i, shift(plaintext, i), reversed, doubled);
        }
      }

      function main() {
        var $plaintext = $('#plaintext').focus();
        var $table = $('table');
        $('input').on('input change', function () { render($plaintext, $table); });
      }

      $(main);
    </script>
  </head>
  <body>
    <h1>Caesar Shift</h1>
    <p>
      <input id=plaintext />
    </p>
    <p>
      <label>Reverse <input id=reverse type=checkbox /></label>
      <label>Double  <input id=double  type=checkbox /></label>
    </p>
    <table />
  </body>
</html>
